<link rel="import" href="/bower_components/polymer/polymer-element.html">
<link rel="import" href="/bower_components/paper-card/paper-card.html">
<link rel="import" href="../../core/components/ps-img/ps-img.html">
<link rel="import" href="../../core/styles/ps-styles.html">

<dom-module id="ps-pizza-list-card">
    <template>
        <style include="ps-styles">
         
        </style>

   

    </template>
    <script>
        (function () {

            /**
             * We will recieve a single path for every pizza img,
             * and by naming convention we know that there is 
             * a good image, called `${pizza.img}400.png` and a
             * small image that will load very fast called
             * `${pizza.img}400-min.png` so we configure those
             * constants at the beggining of the module.
             */
            const EXTENSION = '.png';
            const SIZE = 400;
            const MIN_KEYWORD = '-min';

            class PsPizzaListCard extends Polymer.Element {
                static get is() {return 'ps-pizza-list-card';}
                /**
                 * This computed properties will only trigger once,
                 * since they are tyring to observe a complex path.
                 * 
                 * The correct way would be to create a complex observer
                 * that updated _imgSrc and _imgLazySrc on item.img change. 
                 */
                static get properties() {
                    return {
                        pizza: Object,
                        _imgSrc: {
                            type: String,
                            computed: '_getImgSrc(pizza.img)'
                        },
                        _imgLazySrc: {
                            type: String,
                            computed: '_getImgLazySrc(pizza.img)'
                        },
                        _hover: Boolean
                    };
                }
                _getImgSrc(image) {
                    return image + SIZE + MIN_KEYWORD + EXTENSION;
                }
                _getImgLazySrc(image) {
                    return image + SIZE + EXTENSION;
                }
              
                /**
                 * When clicking on an image we want to navigate
                 * to its details, for that we use Router 
                 */
                _goToDetails() {
                    Router.setRoute(`/pizzas/${this.pizza.id}`);
                }
            }
            customElements.define(PsPizzaListCard.is, PsPizzaListCard)

        }())
    </script>
</dom-module>